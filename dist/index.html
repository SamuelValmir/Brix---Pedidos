<!-- I must:
    bootstrap button effects
    colors
    select column and start point line
    background animations (balls moving)

    
    How to build site with static page.
    How to change page(between) with static page
    Store data so that client don't need request server
-->

<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>

    <!-- Jquery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
        integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/indexStyle.css">
    <title>Pedidos</title>
</head>

<body>
    <div class="container-fluid p-5">
        <a type="button" class="btn btn-primary mb-5" href="/pages/editTable.html">Adicionar Nova Tabela</a>

        <div class="overflow-auto mb-5" id="tableContainer">
            <table class="table table-striped-columns table-hover table-bordered"> </table>
        </div>

        <div class="mb-5">
            <h5>Itens selecionados</h5>
            <div class="d-flex flex-column" id="selectedItems">
            </div>

        </div>

        <div class="text-center">

            <button class="btn btn-success">Gerar Documento</button>
        </div>
    </div>


    <div class="bg-dark w-100 h-100 position-absolute top-0 bg-opacity-50 d-flex justify-content-center align-items-center flex-column visually-hidden"
        id="loader-container">
        <div class="spinner-border text-primary fs-1" id="loader"></div>
        <div class="text-light pt-5 fs-2">Carregando Documento</div>
    </div>

    <script src="js/table.js"></script>
    <script src="./js/communicateWithServer.js"></script>


    <script>
        showLoaderScreen();
        disableScroll();

        getTableFromServer()
            .then(tableJson => {
                document.getElementById("tableContainer").style.height = 0;

                hideLoaderScreen();
                enableScroll();

                if (tableJson) {
                    writeTable(Object.values(tableJson), false)
                        .then(() => {
                            document.getElementById("tableContainer").style.height = "30rem";
                        })
                } else {
                    document.querySelector("table").innerText = "Nenhuma tabela selecionada";
                };
            })

        function goToEditTable() {
            fetch("http://192.168.100.20:9999/", {
                method: "get"
            }).then(res => res.text())
                .then(data => {
                    console.log(data)
                });

            // window.location.assign("/pages");
            // window.location.href = "/pages/editTable.html";
        };
    </script>

</body>

</html>